function generateQRCode(text) {
    // 显示加载状态
    document.getElementById('qr-code').innerHTML = '<div class="loading">生成高质量二维码中...</div>';
    
    // 使用更大的尺寸和更高的纠错级别
    const encodedText = encodeURIComponent(text);
    const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&ecc=H&data=${encodedText}`;
    
    // 创建图片元素
    const qrImage = document.createElement('img');
    qrImage.src = qrUrl;
    qrImage.style.width = '100px';
    qrImage.style.height = '100px';
    qrImage.alt = '二维码';
    
    qrImage.onload = function() {
        // 清空并添加图片到预览区域
        const qrCodeElement = document.getElementById('qr-code');
        qrCodeElement.innerHTML = '';
        qrCodeElement.appendChild(qrImage.cloneNode());
    };
    
    qrImage.onerror = function() {
        document.getElementById('qr-code').innerHTML = '<div style="color:red;font-size:12px;">二维码生成失败</div>';
    };
}
